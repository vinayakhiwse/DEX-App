{"ast":null,"code":"\"use client\";\n\n// src/use-select.ts\nimport { mapPropsVariants } from \"@nextui-org/system\";\nimport { select } from \"@nextui-org/theme\";\nimport { useDOMRef, filterDOMProps } from \"@nextui-org/react-utils\";\nimport { useMemo, useCallback, useRef, useEffect } from \"react\";\nimport { useAriaButton } from \"@nextui-org/use-aria-button\";\nimport { useFocusRing } from \"@react-aria/focus\";\nimport { clsx, dataAttr } from \"@nextui-org/shared-utils\";\nimport { mergeProps } from \"@react-aria/utils\";\nimport { useHover } from \"@react-aria/interactions\";\nimport { useMultiSelect, useMultiSelectState } from \"@nextui-org/use-aria-multiselect\";\nfunction useSelect(originalProps) {\n  var _a, _b;\n  const [props, variantProps] = mapPropsVariants(originalProps, select.variantKeys);\n  const disableAnimation = (_a = originalProps.disableAnimation) != null ? _a : false;\n  let {\n    ref,\n    as,\n    isOpen,\n    label,\n    name,\n    children,\n    isLoading,\n    selectorIcon,\n    defaultOpen,\n    onOpenChange,\n    startContent,\n    endContent,\n    description,\n    errorMessage,\n    renderValue,\n    onSelectionChange,\n    placeholder,\n    disallowEmptySelection = false,\n    selectionMode = \"single\",\n    spinnerRef,\n    scrollRef: scrollRefProp,\n    popoverProps: userPopoverProps,\n    scrollShadowProps: userScrollShadowProps,\n    listboxProps: userListboxProps,\n    validationState,\n    spinnerProps,\n    onChange,\n    onClose,\n    className,\n    classNames,\n    ...otherProps\n  } = props;\n  const scrollShadowRef = useDOMRef(scrollRefProp);\n  const defaultRelatedComponentsProps = {\n    popoverProps: {\n      placement: \"bottom\",\n      triggerScaleOnOpen: false,\n      offset: 5,\n      disableAnimation\n    },\n    scrollShadowProps: {\n      ref: scrollShadowRef,\n      isEnabled: (_b = originalProps.showScrollIndicators) != null ? _b : true,\n      hideScrollBar: true,\n      offset: 15\n    },\n    listboxProps: {\n      disableAnimation\n    }\n  };\n  userPopoverProps = {\n    ...defaultRelatedComponentsProps.popoverProps,\n    ...userPopoverProps\n  };\n  userScrollShadowProps = {\n    ...defaultRelatedComponentsProps.scrollShadowProps,\n    ...userScrollShadowProps\n  };\n  userListboxProps = {\n    ...defaultRelatedComponentsProps.listboxProps,\n    ...userListboxProps\n  };\n  const Component = as || \"button\";\n  const shouldFilterDOMProps = typeof Component === \"string\";\n  const domRef = useDOMRef(ref);\n  const triggerRef = useRef(null);\n  const listboxRef = useRef(null);\n  const popoverRef = useRef(null);\n  const state = useMultiSelectState({\n    ...props,\n    isOpen,\n    selectionMode,\n    disallowEmptySelection,\n    children,\n    isRequired: originalProps == null ? void 0 : originalProps.isRequired,\n    isDisabled: originalProps == null ? void 0 : originalProps.isDisabled,\n    defaultOpen,\n    onOpenChange: open => {\n      onOpenChange == null ? void 0 : onOpenChange(open);\n      if (!open) {\n        onClose == null ? void 0 : onClose();\n      }\n    },\n    onSelectionChange: keys => {\n      onSelectionChange == null ? void 0 : onSelectionChange(keys);\n      if (onChange && typeof onChange === \"function\" && domRef.current) {\n        const event = {\n          target: {\n            ...domRef.current,\n            value: Array.from(keys).join(\",\"),\n            name: domRef.current.name\n          }\n        };\n        onChange(event);\n      }\n    }\n  });\n  const {\n    labelProps,\n    triggerProps,\n    valueProps,\n    menuProps,\n    descriptionProps,\n    errorMessageProps\n  } = useMultiSelect({\n    ...props,\n    disallowEmptySelection,\n    isDisabled: originalProps == null ? void 0 : originalProps.isDisabled\n  }, state, triggerRef);\n  const {\n    isPressed,\n    buttonProps\n  } = useAriaButton(triggerProps, triggerRef);\n  const {\n    focusProps,\n    isFocused,\n    isFocusVisible\n  } = useFocusRing();\n  const {\n    isHovered,\n    hoverProps\n  } = useHover({\n    isDisabled: originalProps == null ? void 0 : originalProps.isDisabled\n  });\n  const labelPlacement = useMemo(() => {\n    var _a2;\n    if ((!originalProps.labelPlacement || originalProps.labelPlacement === \"inside\") && !label) {\n      return \"outside\";\n    }\n    return (_a2 = originalProps.labelPlacement) != null ? _a2 : \"inside\";\n  }, [originalProps.labelPlacement, label]);\n  const hasHelper = !!description || !!errorMessage;\n  const hasPlaceholder = !!placeholder;\n  const isInvalid = validationState === \"invalid\" || originalProps.isInvalid;\n  const shouldLabelBeOutside = labelPlacement === \"outside-left\" || labelPlacement === \"outside\" && hasPlaceholder;\n  const shouldLabelBeInside = labelPlacement === \"inside\";\n  const isLabelPlaceholder = !hasPlaceholder && labelPlacement !== \"outside-left\";\n  const isFilled = state.isOpen || !!state.selectedItems || !!startContent || !!endContent;\n  const baseStyles = clsx(classNames == null ? void 0 : classNames.base, className);\n  const slots = useMemo(() => select({\n    ...variantProps,\n    isLabelPlaceholder,\n    isInvalid,\n    className\n  }), [...Object.values(variantProps), isInvalid, isLabelPlaceholder, className]);\n  useEffect(() => {\n    if (state.isOpen && popoverRef.current && listboxRef.current) {\n      let selectedItem = listboxRef.current.querySelector(\"[aria-selected=true] [data-label=true]\");\n      let scrollShadow = scrollShadowRef.current;\n      if (selectedItem && scrollShadow && selectedItem.parentElement) {\n        let scrollShadowRect = scrollShadow == null ? void 0 : scrollShadow.getBoundingClientRect();\n        let scrollShadowHeight = scrollShadowRect.height;\n        scrollShadow.scrollTop = selectedItem.parentElement.offsetTop - scrollShadowHeight / 2 + selectedItem.parentElement.clientHeight / 2;\n      }\n    }\n  }, [state.isOpen, disableAnimation]);\n  useEffect(() => {\n    if (state.isOpen && popoverRef.current && triggerRef.current) {\n      let selectRect = triggerRef.current.getBoundingClientRect();\n      let popover = popoverRef.current;\n      popover.style.width = selectRect.width + \"px\";\n    }\n  }, [state.isOpen]);\n  const getBaseProps = useCallback((props2 = {}) => ({\n    \"data-filled\": dataAttr(isFilled),\n    \"data-has-helper\": dataAttr(hasHelper),\n    className: slots.base({\n      class: clsx(baseStyles, props2.className)\n    }),\n    ...props2\n  }), [slots, hasHelper, isFilled, baseStyles]);\n  const getTriggerProps = useCallback((props2 = {}) => {\n    return {\n      ref: triggerRef,\n      \"data-open\": dataAttr(state.isOpen),\n      \"data-disabled\": dataAttr(originalProps == null ? void 0 : originalProps.isDisabled),\n      \"data-focus\": dataAttr(isFocused),\n      \"data-pressed\": dataAttr(isPressed),\n      \"data-focus-visible\": dataAttr(isFocusVisible),\n      \"data-hover\": dataAttr(isHovered),\n      className: slots.trigger({\n        class: classNames == null ? void 0 : classNames.trigger\n      }),\n      ...mergeProps(buttonProps, focusProps, hoverProps, filterDOMProps(otherProps, {\n        enabled: shouldFilterDOMProps\n      }), filterDOMProps(props2))\n    };\n  }, [slots, triggerRef, state.isOpen, classNames == null ? void 0 : classNames.trigger, originalProps == null ? void 0 : originalProps.isDisabled, isFocused, isPressed, isFocusVisible, isHovered, buttonProps, focusProps, hoverProps, otherProps, shouldFilterDOMProps]);\n  const getHiddenSelectProps = useCallback((props2 = {}) => ({\n    state,\n    triggerRef,\n    selectRef: domRef,\n    selectionMode,\n    label: originalProps == null ? void 0 : originalProps.label,\n    name: originalProps == null ? void 0 : originalProps.name,\n    isRequired: originalProps == null ? void 0 : originalProps.isRequired,\n    autoComplete: originalProps == null ? void 0 : originalProps.autoComplete,\n    isDisabled: originalProps == null ? void 0 : originalProps.isDisabled,\n    onChange,\n    ...props2\n  }), [state, selectionMode, originalProps == null ? void 0 : originalProps.label, originalProps == null ? void 0 : originalProps.autoComplete, originalProps == null ? void 0 : originalProps.name, originalProps == null ? void 0 : originalProps.isDisabled, triggerRef]);\n  const getLabelProps = useCallback((props2 = {}) => ({\n    className: slots.label({\n      class: clsx(classNames == null ? void 0 : classNames.label, props2.className)\n    }),\n    ...labelProps,\n    ...props2\n  }), [slots, classNames == null ? void 0 : classNames.label, labelProps]);\n  const getValueProps = useCallback((props2 = {}) => ({\n    className: slots.value({\n      class: clsx(classNames == null ? void 0 : classNames.value, props2.className)\n    }),\n    ...valueProps,\n    ...props2\n  }), [slots, classNames == null ? void 0 : classNames.value, valueProps]);\n  const getListboxWrapperProps = useCallback((props2 = {}) => ({\n    className: slots.listboxWrapper({\n      class: clsx(classNames == null ? void 0 : classNames.listboxWrapper, props2 == null ? void 0 : props2.className)\n    }),\n    ...mergeProps(userScrollShadowProps, props2)\n  }), [slots.listboxWrapper, classNames == null ? void 0 : classNames.listboxWrapper, userScrollShadowProps]);\n  const getListboxProps = (props2 = {}) => {\n    return {\n      state,\n      ref: listboxRef,\n      className: slots.listbox({\n        class: clsx(classNames == null ? void 0 : classNames.listbox, props2 == null ? void 0 : props2.className)\n      }),\n      ...mergeProps(userListboxProps, props2, menuProps)\n    };\n  };\n  const getPopoverProps = useCallback((props2 = {}) => {\n    return {\n      state,\n      triggerRef,\n      ref: popoverRef,\n      scrollRef: listboxRef,\n      triggerType: \"listbox\",\n      className: slots.popover({\n        class: clsx(classNames == null ? void 0 : classNames.popover, props2.className)\n      }),\n      ...mergeProps(userPopoverProps, props2),\n      offset: state.selectedItems && state.selectedItems.length > 0 ? state.selectedItems.length * 1e-8 + ((userPopoverProps == null ? void 0 : userPopoverProps.offset) || 0) : userPopoverProps == null ? void 0 : userPopoverProps.offset\n    };\n  }, [slots, classNames == null ? void 0 : classNames.popover, userPopoverProps, triggerRef, state, state.selectedItems]);\n  const getSelectorIconProps = useCallback(() => ({\n    \"aria-hidden\": dataAttr(true),\n    \"data-open\": dataAttr(state.isOpen),\n    className: slots.selectorIcon({\n      class: classNames == null ? void 0 : classNames.selectorIcon\n    })\n  }), [slots, classNames == null ? void 0 : classNames.selectorIcon, state == null ? void 0 : state.isOpen]);\n  const getInnerWrapperProps = useCallback((props2 = {}) => {\n    return {\n      ...props2,\n      className: slots.innerWrapper({\n        class: clsx(classNames == null ? void 0 : classNames.innerWrapper, props2 == null ? void 0 : props2.className)\n      })\n    };\n  }, [slots, classNames == null ? void 0 : classNames.innerWrapper]);\n  const getHelperWrapperProps = useCallback((props2 = {}) => {\n    return {\n      ...props2,\n      className: slots.helperWrapper({\n        class: clsx(classNames == null ? void 0 : classNames.helperWrapper, props2 == null ? void 0 : props2.className)\n      })\n    };\n  }, [slots, classNames == null ? void 0 : classNames.helperWrapper]);\n  const getDescriptionProps = useCallback((props2 = {}) => {\n    return {\n      ...props2,\n      ...descriptionProps,\n      className: slots.description({\n        class: clsx(classNames == null ? void 0 : classNames.description, props2 == null ? void 0 : props2.className)\n      })\n    };\n  }, [slots, classNames == null ? void 0 : classNames.description]);\n  const getMainWrapperProps = useCallback((props2 = {}) => {\n    return {\n      ...props2,\n      className: slots.mainWrapper({\n        class: clsx(classNames == null ? void 0 : classNames.mainWrapper, props2 == null ? void 0 : props2.className)\n      })\n    };\n  }, [slots, classNames == null ? void 0 : classNames.mainWrapper]);\n  const getErrorMessageProps = useCallback((props2 = {}) => {\n    return {\n      ...props2,\n      ...errorMessageProps,\n      className: slots.errorMessage({\n        class: clsx(classNames == null ? void 0 : classNames.errorMessage, props2 == null ? void 0 : props2.className)\n      })\n    };\n  }, [slots, errorMessageProps, classNames == null ? void 0 : classNames.errorMessage]);\n  const getSpinnerProps = useCallback((props2 = {}) => {\n    return {\n      \"aria-hidden\": dataAttr(true),\n      color: \"current\",\n      size: \"sm\",\n      ...spinnerProps,\n      ...props2,\n      ref: spinnerRef,\n      className: slots.spinner({\n        class: clsx(classNames == null ? void 0 : classNames.spinner, props2 == null ? void 0 : props2.className)\n      })\n    };\n  }, [slots, spinnerRef, spinnerProps, classNames == null ? void 0 : classNames.spinner]);\n  return {\n    Component,\n    domRef,\n    state,\n    label,\n    name,\n    triggerRef,\n    isLoading,\n    placeholder,\n    startContent,\n    endContent,\n    description,\n    selectorIcon,\n    errorMessage,\n    hasHelper,\n    labelPlacement,\n    hasPlaceholder,\n    renderValue,\n    selectionMode,\n    disableAnimation,\n    shouldLabelBeOutside,\n    shouldLabelBeInside,\n    getBaseProps,\n    getTriggerProps,\n    getLabelProps,\n    getValueProps,\n    getListboxProps,\n    getPopoverProps,\n    getSpinnerProps,\n    getMainWrapperProps,\n    getListboxWrapperProps,\n    getHiddenSelectProps,\n    getInnerWrapperProps,\n    getHelperWrapperProps,\n    getDescriptionProps,\n    getErrorMessageProps,\n    getSelectorIconProps\n  };\n}\nexport { useSelect };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}